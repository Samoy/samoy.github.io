---
layout: post
title: PHP与MySQL数据库的连接
categories: PHP
date: 2016-05-21 11:47:10
---
前言：本文基于Mac环境，且只适合新手，务必配置好必需的开发环境。需要安装MySQL，Apache和PHP（安装和配置网上一搜一大把，但是要注意在MySQL安装过程中可能会遇到坑，如有遇到，请参考:http://blog.5ibc.net/p/28202.html），本文介绍两种方法。

## 第一种方法：使用工具栏连接MySQL数据库

1. 打开PhpStorm,创建一个php工程，大致是这样的：
![这里写图片描述](http://img.blog.csdn.net/20160521141907221)

2. 在PhpStorm的工具栏中选择"View"按钮，选择"Tool Windows"，选择"Database"：
![这里写图片描述](http://img.blog.csdn.net/20160521142845194)

3. 在右侧窗口选择"+"添加一个MySQL数据库：
![这里写图片描述](http://img.blog.csdn.net/20160521143029241)

4. 填入MySQL的用户名和密码（并且可以点击下方的Test Connection测试一下是否连接成功）:
![这里写图片描述](http://img.blog.csdn.net/20160521143320850)

5. 点击"OK"，此时MySQL连接成功，然后双击这个数据库连接，我们可以进入一个SQL语句编辑界面，我们即可在这里编写SQL语句了，下面是SQL语句：

```sql
CREATE DATABASE test_tool;
USE test_tool;
CREATE TABLE STUDENT(sid VARCHAR(12),sname VARCHAR(20), sage INT);

#添加语句(插入一个学号为123456,名字为samoy,年龄为18的学生)
INSERT STUDENT (sid, sname, sage) VALUES ('123456','samoy',18);

#查询语句(查询表中所有数据)
SELECT * FROM STUDENT;

#更新语句(更新名为samoy的学生的年龄为24)
UPDATE STUDENT SET sage = 24 WHERE sname = 'samoy';

#删除语句(删除一个名为samoy的学生)
DELETE FROM STUDENT WHERE sname = 'samoy';

DROP DATABASE test_tool;
```
6.选择执行语句，输出结果如下：

![这里写图片描述](http://img.blog.csdn.net/20160521151155855)


## 第二种方法：使用代码连接数据库
1.创建一个index.php文件，没有任何实质内容：
![这里写图片描述](http://img.blog.csdn.net/20160521142252457)

2.在index.php写代码：

```php
<?php
/**
 * Created by PhpStorm.
 * User: Samoy
 * Date: 16/5/21
 * Time: 14:20
 */

//数据库连接,test是数据库的名字,使用完成之后注意关闭数据库连接
$con = mysqli_connect("localhost","root","123456");

if (!$con)
{
    die('Could not connect: ' . mysqli_error($con));
}

//创建数据库
if (mysqli_query($con,"CREATE DATABASE test_code"))
{
    echo "Database created";
}

else
{
    echo "Database created error: " . mysqli_error($con);
}

//使用该数据库
mysqli_select_db($con,"test_code");

//创建表
$sql = "CREATE TABLE STUDENTS (sid varchar(12),sname varchar(20),sage int)";
mysqli_query($con,$sql);

//向表中插入数据
$insert = "INSERT STUDENTS (sid, sname, sage) VALUES ('123456','samoy',18)";
mysqli_query($con, $insert);

//从表中查询数据
$query = "SELECT * FROM STUDENTS";
$result = mysqli_query($con, $query);

//在HTML中显示数据
echo "<table border='1'>
<tr>
<th>sid</th>
<th>sname</th>
<th>sage</th>
</tr>";

while($row = mysqli_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . $row['sid'] . "</td>";
    echo "<td>" . $row['sname'] . "</td>";
    echo "<td>" . $row['sage'] . "</td>";
    echo "</tr>";
}
echo "</table>";

/*

//在表中更新数据
$update = "UPDATE STUDENT sage = 24 WHERE sname = 'samoy'";
mysqli_query($con, $update);

//删除表中数据
$delete = "DELETE FROM STUDENT WHERE sname = 'samoy'";
mysqli_query($con, $delete);

*/

//最后关闭数据库连接
mysqli_close($con);
```

3.点击运行，或者直接在该文件的右上角点击浏览器图标，运行程序，运行效果如下：
![这里写图片描述](http://img.blog.csdn.net/20160521154249599)


此时PHP与MySQL的连接已经完成，如有疑问，欢迎评论留言或者和我联系：http://msg.csdn.net/letters/model?receiver=samoy。

